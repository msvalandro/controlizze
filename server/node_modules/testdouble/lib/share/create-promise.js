'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createPromise;

var _config = require('../config');

var _config2 = _interopRequireDefault(_config);

var _ensurePromise = require('../log/ensure-promise');

var _ensurePromise2 = _interopRequireDefault(_ensurePromise);

var _callLater = require('../share/call-later');

var _callLater2 = _interopRequireDefault(_callLater);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createPromise(stubbing, willResolve) {
  var Promise = (0, _config2.default)().promiseConstructor;
  (0, _ensurePromise2.default)('error');
  var value = stubbing.currentOutcome;
  return new Promise(function (resolve, reject) {
    (0, _callLater2.default)(function () {
      return willResolve ? resolve(value) : reject(value);
    }, [value], stubbing.options.defer, stubbing.options.delay);
  });
}